import { Hono } from 'hono'
import { renderer } from './renderer'
import { cors } from 'hono/cors'

type Bindings = {
  OPENAI_API_KEY?: string
  OPENAI_BASE_URL?: string
}

const app = new Hono<{ Bindings: Bindings }>()

app.use(renderer)
app.use('/api/*', cors())

// ë©”ì¸ í˜ì´ì§€
app.get('/', (c) => {
  return c.render(
    <>
      <div class="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100">
        {/* í—¤ë” */}
        <header class="bg-white shadow-sm border-b border-gray-200">
          <div class="max-w-6xl mx-auto px-4 py-6">
            <h1 class="text-3xl font-bold text-gray-900 mb-2">
              <i class="fas fa-heartbeat text-red-500 mr-2"></i>
              ì¸ë°”ë”” ìƒë‹´ ê²°ê³¼ì§€
            </h1>
            <p class="text-gray-600 text-sm">ì¸ë°”ë”” ì´ë¯¸ì§€ ì—…ë¡œë“œ â†’ ë¶„ì„ â†’ ìƒë‹´ìš© ê²°ê³¼ ì¶œë ¥</p>
            <p class="text-xs text-gray-500 mt-2">
              <i class="fas fa-info-circle mr-1"></i>
              ë³¸ ê²°ê³¼ëŠ” ì½”ì¹­ ëª©ì ì´ë©° ì¹˜ë£Œ/ì§„ë‹¨ì´ ì•„ë‹™ë‹ˆë‹¤.
            </p>
          </div>
        </header>

        {/* ë©”ì¸ ì»¨í…ì¸  */}
        <main class="max-w-6xl mx-auto px-4 py-8">
          {/* ì—…ë¡œë“œ ì˜ì—­ */}
          <div class="bg-white rounded-lg shadow-md p-6 mb-6">
            <h2 class="text-xl font-semibold mb-4 text-gray-800">
              <i class="fas fa-upload mr-2 text-blue-500"></i>
              ì¸ë°”ë”” ì´ë¯¸ì§€ ì—…ë¡œë“œ
            </h2>
            
            <div id="upload-area" class="border-3 border-dashed border-gray-300 rounded-lg p-8 text-center cursor-pointer hover:border-blue-500 transition-colors bg-gray-50">
              <div class="pointer-events-none">
                <i class="fas fa-cloud-upload-alt text-5xl text-gray-400 mb-3"></i>
                <p class="text-gray-600 mb-2">ë“œë˜ê·¸ ì•¤ ë“œë¡­ ë˜ëŠ” í´ë¦­í•˜ì—¬ íŒŒì¼ ì„ íƒ</p>
                <p class="text-sm text-gray-500">JPG, PNG í˜•ì‹ ì§€ì›</p>
              </div>
              <input type="file" id="image-input" accept="image/*" style="position: absolute; width: 1px; height: 1px; opacity: 0; pointer-events: none;" />
            </div>

            <div id="preview-area" class="hidden mt-4">
              <div class="relative inline-block">
                <img id="preview-image" class="max-w-full max-h-96 rounded-lg shadow-md" alt="Preview" />
                <button id="remove-image" class="absolute top-2 right-2 bg-red-500 text-white rounded-full p-2 hover:bg-red-600 shadow-lg">
                  <i class="fas fa-times"></i>
                </button>
              </div>
            </div>

            {/* ì˜µì…˜ ì˜ì—­ */}
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-6">
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">
                  <i class="fas fa-bullseye mr-1"></i>ëª©í‘œ ì„¤ì •
                </label>
                <select id="goal-select" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                  <option value="ê· í˜•">ê· í˜•</option>
                  <option value="ì²´ì§€ë°© ìš°ì„ ">ì²´ì§€ë°© ìš°ì„ </option>
                  <option value="ê·¼ìœ¡ ìš°ì„ ">ê·¼ìœ¡ ìš°ì„ </option>
                </select>
              </div>
              
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">
                  <i class="fas fa-comment-dots mr-1"></i>ë§íˆ¬ ìŠ¤íƒ€ì¼
                </label>
                <select id="tone-select" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                  <option value="ë¶€ë“œëŸ½ê²Œ">ë¶€ë“œëŸ½ê²Œ</option>
                  <option value="ì „ë¬¸ê°€ìŠ¤ëŸ½ê²Œ">ì „ë¬¸ê°€ìŠ¤ëŸ½ê²Œ</option>
                  <option value="ë§¤ìš° ê°„ë‹¨íˆ">ë§¤ìš° ê°„ë‹¨íˆ</option>
                </select>
              </div>
            </div>

            {/* ì‹¤í–‰ ë²„íŠ¼ */}
            <button id="analyze-btn" class="w-full mt-6 bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed">
              <i class="fas fa-robot mr-2"></i>ë¶„ì„í•˜ê¸°
            </button>

            {/* ë¡œë”© ìƒíƒœ */}
            <div id="loading-area" class="hidden mt-4 text-center">
              <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div>
              <p class="text-gray-600 mt-2">ë¶„ì„ ì¤‘...</p>
            </div>

            {/* ì—ëŸ¬ ë©”ì‹œì§€ */}
            <div id="error-area" class="hidden mt-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg"></div>
          </div>

          {/* ìˆ˜ì¹˜ í™•ì¸/ìˆ˜ì • ì˜ì—­ */}
          <div id="verification-area" class="hidden mt-6">
            <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-6">
              <div class="flex items-start mb-4">
                <i class="fas fa-exclamation-triangle text-yellow-600 text-2xl mr-3 mt-1"></i>
                <div>
                  <h3 class="text-lg font-bold text-yellow-800 mb-2">AI ë¶„ì„ ê²°ê³¼ í™•ì¸</h3>
                  <p class="text-sm text-yellow-700">AIê°€ ì¸ë°”ë”” ì´ë¯¸ì§€ì—ì„œ ì½ì€ ìˆ˜ì¹˜ì…ë‹ˆë‹¤. ì •í™•í•œì§€ í™•ì¸í•˜ê³  í•„ìš”ì‹œ ìˆ˜ì •í•´ì£¼ì„¸ìš”.</p>
                </div>
              </div>
              
              <div id="verification-metrics" class="space-y-3 mt-4"></div>
              
              <div class="flex gap-3 mt-6">
                <button id="confirm-metrics-btn" class="flex-1 bg-green-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-green-700 transition-colors">
                  <i class="fas fa-check-circle mr-2"></i>ì •í™•í•©ë‹ˆë‹¤. ìµœì¢… ë¶„ì„ ìƒì„±
                </button>
                <button id="cancel-verification-btn" class="px-6 py-3 border border-gray-300 rounded-lg font-semibold hover:bg-gray-50 transition-colors">
                  <i class="fas fa-times mr-2"></i>ì·¨ì†Œ
                </button>
              </div>
            </div>
          </div>

          {/* ê²°ê³¼ ì˜ì—­ */}
          <div id="result-area" class="hidden">
            <div class="bg-white rounded-lg shadow-md overflow-hidden">
              {/* íƒ­ í—¤ë” */}
              <div class="border-b border-gray-200 bg-gray-50">
                <nav class="flex overflow-x-auto" id="tab-nav">
                  <button class="tab-btn active px-6 py-3 text-sm font-medium border-b-2 border-blue-600 text-blue-600 whitespace-nowrap" data-tab="summary">
                    <i class="fas fa-star mr-1"></i>ìš”ì•½
                  </button>
                  <button class="tab-btn px-6 py-3 text-sm font-medium border-b-2 border-transparent text-gray-500 hover:text-gray-700 whitespace-nowrap" data-tab="metrics">
                    <i class="fas fa-chart-line mr-1"></i>í•µì‹¬ ì§€í‘œ
                  </button>
                  <button class="tab-btn px-6 py-3 text-sm font-medium border-b-2 border-transparent text-gray-500 hover:text-gray-700 whitespace-nowrap" data-tab="interpretation">
                    <i class="fas fa-lightbulb mr-1"></i>í•´ì„
                  </button>
                  <button class="tab-btn px-6 py-3 text-sm font-medium border-b-2 border-transparent text-gray-500 hover:text-gray-700 whitespace-nowrap" data-tab="solution">
                    <i class="fas fa-leaf mr-1"></i>ì†”ë£¨ì…˜
                  </button>
                  <button class="tab-btn px-6 py-3 text-sm font-medium border-b-2 border-transparent text-gray-500 hover:text-gray-700 whitespace-nowrap" data-tab="script">
                    <i class="fas fa-comments mr-1"></i>ìƒë‹´ ë©˜íŠ¸
                  </button>
                  <button class="tab-btn px-6 py-3 text-sm font-medium border-b-2 border-transparent text-gray-500 hover:text-gray-700 whitespace-nowrap" data-tab="sms">
                    <i class="fas fa-sms mr-1"></i>SMS
                  </button>
                </nav>
              </div>

              {/* íƒ­ ì»¨í…ì¸  */}
              <div class="p-6">
                <div id="tab-summary" class="tab-content"></div>
                <div id="tab-metrics" class="tab-content hidden"></div>
                <div id="tab-interpretation" class="tab-content hidden"></div>
                <div id="tab-solution" class="tab-content hidden"></div>
                <div id="tab-script" class="tab-content hidden"></div>
                <div id="tab-sms" class="tab-content hidden"></div>
              </div>
            </div>
          </div>
        </main>

        {/* Toast ì•Œë¦¼ */}
        <div id="toast" class="hidden fixed bottom-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg">
          <i class="fas fa-check-circle mr-2"></i>
          <span id="toast-message">ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!</span>
        </div>
      </div>

      <script src="/static/app.js"></script>
    </>
  )
})

// AI ë¶„ì„ API
app.post('/api/analyze', async (c) => {
  try {
    const body = await c.req.parseBody()
    const imageFile = body['image'] as File
    const goal = body['goal'] as string
    const tone = body['tone'] as string

    if (!imageFile) {
      return c.json({ error: 'ì´ë¯¸ì§€ê°€ ì—†ìŠµë‹ˆë‹¤.' }, 400)
    }

    // ì´ë¯¸ì§€ë¥¼ base64ë¡œ ë³€í™˜
    const arrayBuffer = await imageFile.arrayBuffer()
    const base64Image = btoa(
      new Uint8Array(arrayBuffer).reduce((data, byte) => data + String.fromCharCode(byte), '')
    )
    const imageUrl = `data:${imageFile.type};base64,${base64Image}`

    // ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸
    const systemPrompt = `[IMPORTANT DISCLAIMER]
This is NOT medical diagnosis or treatment. This is a wellness coaching analysis for nutritional supplement recommendations based on body composition data from a commercial InBody device. The data is used solely as a reference for healthy lifestyle and nutrition planning purposes.

[ë©´ì±…ì¡°í•­ - ì›°ë‹ˆìŠ¤ ì½”ì¹­ ëª©ì ]
ì´ ë¶„ì„ì€ ì˜ë£Œ ì§„ë‹¨, ì§ˆë³‘ ì¹˜ë£Œ, ì²˜ë°©ì´ ì•„ë‹™ë‹ˆë‹¤.
ìƒìš© ì²´ì„±ë¶„ ë¶„ì„ ê¸°ê¸°(InBody)ì˜ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ ì›°ë‹ˆìŠ¤ ì½”ì¹­ ë° ì˜ì–‘ ë³´ì¶©ì œ ì¶”ì²œì…ë‹ˆë‹¤.
ê±´ê°•í•œ ë¼ì´í”„ìŠ¤íƒ€ì¼ê³¼ ì˜ì–‘ ê³„íšì„ ìœ„í•œ ì°¸ê³  ìë£Œë¡œë§Œ ì‚¬ìš©ë©ë‹ˆë‹¤.

ì—­í• : ë„ˆëŠ” 10ë…„ ì´ìƒ í˜„ì¥ì—ì„œ ìˆ˜ì²œ ëª…ì˜ ê³ ê°ì„ ìƒë‹´í•œ í—ˆë²Œë¼ì´í”„ í”„ë¦¬ë¯¸ì–´ ì›°ë‹ˆìŠ¤ ì½”ì¹˜ì´ë©°,
ì¸ë°”ë”” ì²´ì„±ë¶„ ë¶„ì„ ì „ë¬¸ê°€ì´ì ì˜ì–‘í•™ ì»¨ì„¤í„´íŠ¸ë‹¤. ì´ˆë³´ ì½”ì¹˜ë“¤ë„ ì „ë¬¸ê°€ì²˜ëŸ¼ ìƒë‹´í•  ìˆ˜ ìˆë„ë¡ 
ìƒì„¸í•˜ê³  ì‹¤ì§ˆì ì¸ ê°€ì´ë“œë¥¼ ì œê³µí•œë‹¤.

ì…ë ¥: "ì¸ë°”ë”” ê²°ê³¼ì§€ ì´ë¯¸ì§€ 1ì¥"
ì¶œë ¥: ì›°ë‹ˆìŠ¤ ì½”ì¹­ì„ ìœ„í•œ ì „ë¬¸ ë¶„ì„ ê²°ê³¼ (JSON í˜•ì‹)

ì¤€ìˆ˜ì‚¬í•­:
- ì˜ë£Œ ì§„ë‹¨, ì§ˆë³‘ ì¹˜ë£Œ, ì²˜ë°© ê´€ë ¨ ë‚´ìš©ì€ ì ˆëŒ€ í¬í•¨í•˜ì§€ ì•ŠìŒ
- ê±´ê°•í•œ ì‹ìŠµê´€ ë° ì˜ì–‘ ë³´ì¶© ê´€ì ìœ¼ë¡œë§Œ ì œì•ˆ
- í—ˆë²Œë¼ì´í”„ ì œí’ˆì€ ì˜ì–‘ ë³´ì¶©ì œë¡œì„œë§Œ ì„¤ëª…

[ì²´ì„±ë¶„ ë¶„ì„ ì „ë¬¸ ì›ì¹™]
1. **ì •í™•í•œ ìˆ˜ì¹˜ ì½ê¸° - ë§¤ìš° ì¤‘ìš”!**:
   ì¸ë°”ë”” ê²°ê³¼ì§€ëŠ” ì—¬ëŸ¬ ì„¹ì…˜ìœ¼ë¡œ ë‚˜ë‰˜ì–´ ìˆìœ¼ë¯€ë¡œ, ê° ìˆ˜ì¹˜ë¥¼ ì •í™•í•œ ìœ„ì¹˜ì—ì„œ ì½ìœ¼ì„¸ìš”:
   
   a) ì²´ì„±ë¶„ ë¶„ì„ (Body Composition Analysis) ì„¹ì…˜:
      - ì²´ì¤‘(Weight): ìƒë‹¨ì˜ "ì²´ì„±ë¶„ë¶„ì„" í‘œì—ì„œ "ì²´ì¤‘" í–‰ì˜ "ì¸¡ì •ê°’" ì—´
      - ê³¨ê²©ê·¼ëŸ‰(SMM): "ì²´ì„±ë¶„ë¶„ì„" í‘œì—ì„œ "ê³¨ê²©ê·¼ëŸ‰" í–‰ì˜ "ì¸¡ì •ê°’" ì—´
      - ì²´ì§€ë°©ëŸ‰(BFM): "ì²´ì„±ë¶„ë¶„ì„" í‘œì—ì„œ "ì²´ì§€ë°©ëŸ‰" í–‰ì˜ "ì¸¡ì •ê°’" ì—´
   
   b) ê·¼ìœ¡-ì§€ë°© ë¶„ì„ (Muscle-Fat Analysis) ì„¹ì…˜:
      - ì²´ì§€ë°©ë¥ (%): ìš°ì¸¡ ìƒë‹¨ "ì¸ë°”ë””ì ìˆ˜" ê·¼ì²˜ì— %ë¡œ í‘œì‹œ
      - ë˜ëŠ” "ì²´ì§€ë°©ë¥ " í•­ëª©ì˜ ì¸¡ì •ê°’
   
   c) ë¹„ë§Œ ë¶„ì„ (Obesity Analysis) ì„¹ì…˜:
      - BMI: "BMI" í–‰ì˜ ì¸¡ì •ê°’
      - ë³µë¶€ì§€ë°©ë¥ (WHR): "ë³µë¶€ì§€ë°©ë¥ " ë˜ëŠ” "WHR" í–‰ì˜ ì¸¡ì •ê°’
      - ë‚´ì¥ì§€ë°© ë ˆë²¨: "ë‚´ì¥ì§€ë°©ë ˆë²¨" ë˜ëŠ” ìˆ«ìë¡œ í‘œì‹œ (1-20 ë²”ìœ„)
   
   **ì£¼ì˜ì‚¬í•­**:
   - ê° ì„¹ì…˜ì˜ ì œëª©ì„ í™•ì¸í•˜ê³  ì˜¬ë°”ë¥¸ ìœ„ì¹˜ì—ì„œ ì½ìœ¼ì„¸ìš”
   - í¼ì„¼íŠ¸(%) ìˆ˜ì¹˜ë¥¼ ì†Œìˆ˜ì ìœ¼ë¡œ ì˜ëª» ì½ì§€ ë§ˆì„¸ìš” (ì˜ˆ: 27.4% â‰  34.5%)
   - "ì¸¡ì •ê°’"ê³¼ "í‘œì¤€ë²”ìœ„"ë¥¼ í˜¼ë™í•˜ì§€ ë§ˆì„¸ìš”
   - ë¶ˆëª…í™•í•œ ê²½ìš° "ì´ë¯¸ì§€ìƒ í™•ì¸ ë¶ˆê°€"ë¡œ í‘œì‹œ
   - ì ˆëŒ€ ì¶”ì¸¡í•˜ê±°ë‚˜ ê³„ì‚°í•˜ì§€ ë§ˆì„¸ìš”

2. ìˆ˜ì¹˜ì˜ ì˜ë¯¸ë¥¼ ëª…í™•íˆ ì„¤ëª…:
   - ê³¨ê²©ê·¼ëŸ‰: ê¸°ì´ˆëŒ€ì‚¬ëŸ‰, í™œë™ ëŠ¥ë ¥, ê±´ê°•í•œ ë…¸í™”ì˜ í•µì‹¬ ì§€í‘œ
   - ì²´ì§€ë°©ëŸ‰/ì²´ì§€ë°©ë¥ : ë‹¨ìˆœ ë¯¸ìš©ì´ ì•„ë‹Œ ëŒ€ì‚¬ ê±´ê°•, í˜¸ë¥´ëª¬ ê· í˜•ì˜ ì§€í‘œ
   - ë³µë¶€ì§€ë°©ë¥ (WHR): ë‚´ì¥ì§€ë°© ì¶”ì •, ëŒ€ì‚¬ì¦í›„êµ° ìœ„í—˜ë„ ì§€í‘œ
   - ë‚´ì¥ì§€ë°© ë ˆë²¨: ë³µë¶€ ë‚´ë¶€ ì¥ê¸° ì£¼ë³€ ì§€ë°©, ê±´ê°• ë¦¬ìŠ¤í¬ì˜ í•µì‹¬
   - BMI: ì²´ì¤‘ ëŒ€ë¹„ í‚¤ì˜ ì ì ˆì„±, ë‹¨ ê·¼ìœ¡ëŸ‰ ê³ ë ¤ í•„ìš”

3. ìƒí˜¸ ì—°ê´€ì„± ë¶„ì„:
   - ê³¨ê²©ê·¼ëŸ‰ â†” ê¸°ì´ˆëŒ€ì‚¬ëŸ‰ â†” ì²´ì§€ë°© ê°ì†Œ ëŠ¥ë ¥
   - ì²´ì§€ë°©ë¥  â†” ë³µë¶€ì§€ë°©ë¥  â†” ë‚´ì¥ì§€ë°© ë ˆë²¨ (ëŒ€ì‚¬ ê±´ê°• íŠ¸ë¼ì´ì•µê¸€)
   - ì²´ì¤‘ = ê·¼ìœ¡ + ì§€ë°© + ìˆ˜ë¶„ + ë¬´ê¸°ì§ˆ (ë‹¨ìˆœ ì²´ì¤‘ì´ ì•„ë‹Œ êµ¬ì„±ë¹„ ì¤‘ì‹œ)

3. ê°œì¸ ë§ì¶¤ í•´ì„:
   - í˜„ì¬ ìˆ˜ì¹˜ê°€ í‘œì¤€ ë²”ìœ„ ë‚´ì¸ì§€ ëª…í™•íˆ ì–¸ê¸‰
   - í‘œì¤€ ëŒ€ë¹„ ë¶€ì¡±/ê³¼ë‹¤í•œ ë¶€ë¶„ êµ¬ì²´ì  ìˆ˜ì¹˜ë¡œ ì„¤ëª…
   - ë‚˜ì´, ì„±ë³„ ê³ ë ¤í•œ í˜„ì‹¤ì  ëª©í‘œ ì œì‹œ

[í—ˆë²Œë¼ì´í”„ ì œí’ˆ ì „ë¬¸ ì§€ì‹ - 2025ë…„ ìµœì‹  ì •ë³´]
ë°˜ë“œì‹œ ì•„ë˜ ì‹¤ì œ ì œí’ˆëª…ê³¼ ê°€ê²©ìœ¼ë¡œë§Œ ì œì•ˆ. ê° ì œí’ˆì˜ ì •í™•í•œ ì—­í• ê³¼ ì„­ì·¨ ë°©ë²• ëª…ì‹œ:

**í•µì‹¬ ì˜ì–‘ (ì²´ì¤‘ì¡°ì ˆìš© ì¡°ì œì‹í’ˆ/íŠ¹ìˆ˜ì˜ì–‘ì‹í’ˆ):**
- Formula 1 ê±´ê°•í•œ ì‹ì‚¬ (63,000ì›): 7ê°€ì§€ ë§› (ë°”ë‹ë¼, ì´ˆì½œë¦¿, ìŠ¤íŠ¸ë¡œë² ë¦¬, ì¿ í‚¤ì•¤í¬ë¦¼, ë¯¼íŠ¸ì´ˆì½”ë ›, ë¶€ë“œëŸ¬ìš´ì»¤í”¼, ë¶€ë“œëŸ¬ìš´ìºëŸ¬ë©œ)
  * ë‹¨ë°±ì§ˆ 9g, 17ê°€ì§€ ë¹„íƒ€ë¯¼Â·ë¬´ê¸°ì§ˆ, ì‹ì´ì„¬ìœ  3g, í—ˆë¸Œ ì„±ë¶„
  * ì²´ì¤‘ì¡°ì ˆìš© ì¡°ì œì‹í’ˆ - ì‹ì‚¬ ëŒ€ìš©ìœ¼ë¡œ ì„­ì·¨
  â†’ ì„­ì·¨ë²•: ë¬¼ 250ml + ì €ì§€ë°©ìš°ìœ  200mlì— 2ìŠ¤í‘¼(26g), ì‰ì´ì»¤ë¡œ 20ì´ˆ í”ë“¤ê¸°
  â†’ ì‹œê°„: ì¼ì–´ë‚˜ì„œ 30ë¶„ ì´ë‚´ (ì•„ì¹¨) ë˜ëŠ” ì €ë… ì‹ì‚¬ ëŒ€ì²´
  
- Formula 2 ë©€í‹°ë¹„íƒ€ë¯¼Â·ë¬´ê¸°ì§ˆ ì»´í”Œë ‰ìŠ¤ (33,300ì›): 12ê°€ì§€ ë¹„íƒ€ë¯¼ + 9ê°€ì§€ ë¬´ê¸°ì§ˆ + 5ê°€ì§€ ì‹ë¬¼ì„±ë¶„
  * ê±´ê°•ê¸°ëŠ¥ì‹í’ˆ
  â†’ ì„­ì·¨ë²•: ì•„ì¹¨/ì €ë… ì‹ì‚¬ í›„ ê° 1ì •ì”©, ë¬¼ê³¼ í•¨ê»˜
  
- Formula 3 í¼ìŠ¤ë„ ë‹¨ë°±ì§ˆ íŒŒìš°ë” (65,600ì›): ìˆœìˆ˜ ë‹¨ë°±ì§ˆ ë³´ì¶©
  â†’ ì„­ì·¨ë²•: ì‰ì´í¬ì— 1ìŠ¤í‘¼ ì¶”ê°€ ë˜ëŠ” ìš”ê±°íŠ¸, ìŒë£Œì— í˜¼í•©

**ë²ˆë“¤íŒ© (í¸ë¦¬í•œ ì„¸íŠ¸):**
- Formula 1 ì¿ í‚¤ì•¤í¬ë¦¼ë§› ë²ˆë“¤íŒ© (66,000ì›): 30í¬ ê°œë³„í¬ì¥
- í—ˆë²Œ ë² ë²„ë¦¬ì§€ ë²ˆë“¤íŒ© (79,600ì›): 30í¬ ê°œë³„í¬ì¥

**ì—ë„ˆì§€ & ìˆ˜ë¶„ ë³´ì¶©:**
- í—ˆë²Œ ë² ë²„ë¦¬ì§€ (77,300ì›): ì—ë„ˆì§€ ìŒë£Œ, ìƒì¾Œí•œ ë§›
  â†’ ì„­ì·¨ë²•: ë¬¼ 350mlì— 2ìŠ¤í‘¼, í•˜ë£¨ 2-3íšŒ
  
- ì—”-ì•Œ-ì§€ í‹° (N-R-G Tea) (34,700ì›): ì˜¤ë Œì§€í˜ì½” í™ì°¨ì™€ ë…¹ì°¨ ì¶”ì¶œë¬¼
  â†’ ì„­ì·¨ë²•: ë”°ëœ»í•œ ë¬¼ 250mlì— ë°˜ìŠ¤í‘¼, ì˜¤ì „/ì˜¤í›„
  
- í—ˆë²Œ ì•Œë¡œì— ê²” (51,300ì›): ì•Œë¡œì—ë² ë¼ ë†ì¶•ì•¡, ì†Œí™” ê±´ê°•
  â†’ ì„­ì·¨ë²•: ë¬¼ 120mlì— 15ml(ìº¡ 1ê°œ), í•˜ë£¨ 3íšŒ

**ì¥ ê±´ê°• & ì‹ì´ì„¬ìœ :**
- ì…€-ìœ -ë¡œì“° (32,800ì›): ì‹ì´ì„¬ìœ  ë³´ì¶©
  â†’ ì„­ì·¨ë²•: ë¬¼ 300mlì— 1í¬, ì €ë… ì‹ì‚¬ 30ë¶„ ì „
  
- ì•¡í‹°ë¸Œ í™”ì´ë²„ ì»´í”Œë ‰ìŠ¤ (53,000ì›): ì‹ì´ì„¬ìœ  + í”„ë¡œë°”ì´ì˜¤í‹±ìŠ¤
  â†’ ì„­ì·¨ë²•: ë¬¼ 200mlì— 1í¬, ì•„ì¹¨ ê³µë³µ

- í”„ë¡œë°”ì´ì˜¤í‹± ì»´í”Œë ‰ìŠ¤ í”ŒëŸ¬ìŠ¤ (85,600ì›): ìœ ì‚°ê·  20ì–µ CFU
  â†’ ì„­ì·¨ë²•: ì•„ì¹¨ ê³µë³µì— 1ì •

**ë©´ì—­ & í™œë ¥:**
- ë§ˆì´ë®¨ í”ŒëŸ¬ìŠ¤ (65,500ì›): ë©´ì—­ ê¸°ëŠ¥ ì§€ì›
  â†’ ì„­ì·¨ë²•: ì•„ì¹¨ ì‹í›„ 1ì •
  
- í™ì‚¼ ì§„ì„¼ ê²” (187,600ì›): 6ë…„ê·¼ í™ì‚¼ ë†ì¶•ì•¡
  â†’ ì„­ì·¨ë²•: í•˜ë£¨ 1í¬, ë¬¼ ì—†ì´ ì§ì ‘ ì„­ì·¨
  
- í”„ë¡¤ë ˆì‚¬ ë“€ì˜¤ (202,200ì›): ì´ì¤‘ ë°œíš¨ ìœ ì‚°ê· 
  â†’ ì„­ì·¨ë²•: ì•„ì¹¨ ê³µë³µ 1í¬

**ê°„í¸ ê°„ì‹:**
- í”„ë¡œí‹´ ë°” ë””ëŸ­ìŠ¤ (58,200ì›): ì´ˆì½œë¦¿ê°€ê³µí’ˆ, ë‹¨ë°±ì§ˆ 10g
  â†’ ì„­ì·¨ë²•: ì˜¤í›„ 3-4ì‹œ ê°„ì‹ ë˜ëŠ” ìš´ë™ í›„
  
- í•˜ì´ í”„ë¡œí‹´ ì•„ì´ìŠ¤ ì»¤í”¼ (57,300ì›): ì¼ë°˜ì‹í’ˆ(ì»¤í”¼), í¬ë¦¬ë¯¸ì»¤í”¼/ëª¨ì¹´
  â†’ ì„­ì·¨ë²•: ì°¨ê°€ìš´ ë¬¼ 250mlì— 1í¬

**ê¸°íƒ€ ì˜ì–‘ ë³´ì¶©:**
- ë‚˜ì´íŠ¸ì›ìŠ¤ (113,000ì›): ë¹„íƒ€ë¯¼ C, E, ì—½ì‚° - í˜ˆí–‰ ê°œì„ 
- ë¦¬í”„íŠ¸ì˜¤í”„ (103,000ì›): ì—ë„ˆì§€ ë¶€ìŠ¤í„° íƒœë¸”ë¦¿
- íŠ¸ë¦¬í”Œ í—¬ìŠ¤ ë“œë§í¬ 10ë³‘ (61,700ì›): ê°„í¸í•œ ì˜ì–‘ ìŒë£Œ
- ë¦´ë ‰ì„¸ì´ì…˜ í‹° (77,300ì›): í—ˆë¸Œì°¨, ì§„ì • íš¨ê³¼
- í‚¤í† ì‚° í”ŒëŸ¬ìŠ¤ (99,000ì›): í‚¤í† ì‚° ë³´ì¶©

**ìŠ¤í¬ì¸  ë¼ì¸ (HERBALIFE24):**
- Formula 1 ìŠ¤í¬ì¸  (96,400ì›): ìš´ë™ì„ ìˆ˜ìš© ì‹ì‚¬ ëŒ€ì²´
- ë¦¬ë¹Œë“œ ìŠ¤íŠ¸ë­ì“° (156,300ì›): ìš´ë™ í›„ ê·¼ìœ¡ íšŒë³µ
- ì”¨ì•Œì„¸ë¸ ë“œë¼ì´ë¸Œ (57,200ì›): ìš´ë™ ì „ ì—ë„ˆì§€
- ìŠ¤í¬ì¸  í”„ë¡œê·¸ë¨ (309,900ì›): ì¢…í•© ìŠ¤í¬ì¸  ì„¸íŠ¸

**í”„ë¡œê·¸ë¨ (ê³ ê° ë§ì¶¤ ì„¸íŠ¸):**
- ê±´ê°•í•œ ì•„ì¹¨ì‹ì‚¬ í”„ë¡œê·¸ë¨ (161,900ì›)
- í€µìŠ¤íƒ€íŠ¸ í”„ë¡œê·¸ë¨ (290,500ì›)
- ì²´ì¤‘ì¡°ì ˆ í”„ë¡œê·¸ë¨ (441,400ì›)
- ì¥íŠ¼íŠ¼&ì‹ì´ì„¬ìœ  í”„ë¡œê·¸ë¨ (446,400ì›)
- ë©´ì—­íŠ¼íŠ¼ ì•Œë¡œì—ê²” ì„¸íŠ¸ (307,900ì›)

[ì‹¤ì „ ì œí’ˆ ì„¤ëª… ê°€ì´ë“œ - ê³ ê° ì–¸ì–´ë¡œ]
**Formula 1 ê±´ê°•í•œ ì‹ì‚¬ ì„¤ëª…ë²•:**
"ìš°ì£¼ì—ì„œë„ ë¨¹ì„ ìˆ˜ ìˆì„ ì •ë„ë¡œ ì™„ë²½í•œ ì˜ì–‘ì†Œë§Œ ì™ì™ ë½‘ì•„ ë§Œë“  ì‹ì‚¬ì˜ˆìš”. 
7ê°€ì§€ ë§›ìœ¼ë¡œ ì§ˆë¦¬ì§€ ì•Šê³ , ë‘ë¶€ 1ëª¨ì— ë‹¬í•˜ëŠ” ë‹¨ë°±ì§ˆ 9gì´ ë“¤ì–´ìˆì–´ìš”. 
ë†€ë¼ìš´ ê±´ ì¹¼ë¡œë¦¬ê°€ ë°¥ 2ìŠ¤í‘¼, ê¹€ë°¥ 2ì•Œ ì •ë„ì¸ 90ì¹¼ë¡œë¦¬ë°–ì— ì•ˆ ë¼ì„œ 
ì¹¼ë¡œë¦¬ ê±±ì • ì—†ì´ ì˜ì–‘ì€ ê½‰ ì±„ìš¸ ìˆ˜ ìˆë‹¤ëŠ” ê±°ì£ .
17ê°€ì§€ ë¹„íƒ€ë¯¼Â·ë¬´ê¸°ì§ˆ + ì‹ì´ì„¬ìœ  + í—ˆë¸Œ + ì†Œí™”íš¨ì†Œ(íŒŒíŒŒì¸, ë¸Œë¡œë©œë¼ì¸)ê¹Œì§€ ë“¤ì–´ìˆì–´ì„œ
ì†ì´ ë”ë¶€ë£©í•˜ê±°ë‚˜ ë¶ˆí¸í•œ ë¶„ë“¤ë„ í¸í•˜ê²Œ ë“œì‹¤ ìˆ˜ ìˆì–´ìš”."

**Formula 2 ë©€í‹°ë¹„íƒ€ë¯¼ ì„¤ëª…ë²•:**
"ì‰ì´í¬ê°€ ë°¥ì´ë¼ë©´ ì´ê±´ ë°˜ì°¬ì´ì—ìš”. ì‰ì´í¬ì™€ ì§ê¿ìœ¼ë¡œ ë§ì¶°ë†“ì€ ë¹„íƒ€ë¯¼Â·ë¬´ê¸°ì§ˆ íƒ€ë¸”ë ›ì´ì£ .
ë‹¤ë¥¸ ë¹„íƒ€ë¯¼ ë“œì‹œê³  ê³„ì‹œë©´ ë‹¤ ë¨¹ê³  ì´ê±¸ë¡œ ë°”ê¾¸ì„¸ìš”.
ì—ë„ˆì§€ê°€ ë¶€ì¡±í•˜ê±°ë‚˜ ê°ëŸ‰ ì†ë„ê°€ ëŠë¦´ ë•Œ, ìƒê°ë³´ë‹¤ ë¯¸ëŸ‰ì˜ì–‘ì†Œ ë¶€ì¡±ìœ¼ë¡œ ëŒ€ì‚¬ê°€ ì•ˆ ë  ê°€ëŠ¥ì„±ì´ ë†’ê±°ë“ ìš”.
ì´ëŸ´ ë•Œ ì§‘ì¤‘ì ìœ¼ë¡œ ì‚¬ìš©í•˜ë©´ íš¨ê³¼ê°€ í™• ë‹¬ë¼ì§‘ë‹ˆë‹¤."

**Formula 3 ë‹¨ë°±ì§ˆ íŒŒìš°ë” ì„¤ëª…ë²•:**
"ì´ë¦„ ê·¸ëŒ€ë¡œ í¼ìŠ¤ë„, ê°œì¸ ë§ì¶¤ ë‹¨ë°±ì§ˆì´ì—ìš”.
ê·¼ìœ¡ì´ ë¶€ì¡±í•˜ê±°ë‚˜, ìš´ë™í•˜ì‹œê±°ë‚˜, ë‹¨ë°±ì§ˆì´ ë” í•„ìš”í•œ ë¶„ë“¤ì„ ìœ„í•œ ìˆœìˆ˜ ë‹¨ë°±ì§ˆ ë³´ì¶©ì œì…ë‹ˆë‹¤.
ì‰ì´í¬ì— 1ìŠ¤í‘¼ ì¶”ê°€í•˜ë©´ ë‹¨ë°±ì§ˆì´ 15g ì´ìƒìœ¼ë¡œ ì˜¬ë¼ê°€ì£ ."

[ì¸ë°”ë”” ê²°ê³¼ë³„ í”„ë¡œê·¸ë¨ ì ‘ê·¼ë²•]
**ë‹¤ì´ì–´íŠ¸ í”„ë¡œê·¸ë¨ (ì²´ì§€ë°© ê³¼ë‹¤í˜•):**
- ì²´ì§€ë°©ë¥  ë†’ìŒ + ë‚´ì¥ì§€ë°© ì£¼ì˜ â†’ Formula 1 ì €ë… ëŒ€ì²´ + ì…€-ìœ -ë¡œì“° + í—ˆë²Œ ë² ë²„ë¦¬ì§€
- ê°•ì¡°: "ì €ë…ì„ ì‰ì´í¬ë¡œ ë°”ê¾¸ëŠ” ê²Œ í•µì‹¬ì´ì—ìš”. 90ì¹¼ë¡œë¦¬ë¡œ ì˜ì–‘ì€ ë‹¤ ì±„ìš°ë‹ˆê¹Œìš”."
- ì¶”ê°€: ì•¡í‹°ë¸Œ í™”ì´ë²„ ì»´í”Œë ‰ìŠ¤ë¡œ ì•„ì¹¨ í¬ë§Œê°, ì‹ì‚¬ëŸ‰ ìì—°ìŠ¤ëŸ½ê²Œ ì¡°ì ˆ

**í”¼ë¡œê°œì„  í”„ë¡œê·¸ë¨ (ì—ë„ˆì§€ ë¶€ì¡±í˜•):**
- ê³¨ê²©ê·¼ëŸ‰ ë¶€ì¡± + ê¸°ì´ˆëŒ€ì‚¬ ë‚®ìŒ â†’ Formula 1+2+3 ì¡°í•© + ë¦¬í”„íŠ¸ì˜¤í”„ ë˜ëŠ” ì—”-ì•Œ-ì§€ í‹°
- ê°•ì¡°: "ë‹¨ë°±ì§ˆë¡œ ê·¼ìœ¡ì„ ë§Œë“¤ë©´ ê¸°ì´ˆëŒ€ì‚¬ê°€ ì˜¬ë¼ê°€ ì—ë„ˆì§€ê°€ ìƒê¹ë‹ˆë‹¤."
- ì¶”ê°€: í—ˆë²Œ ì•Œë¡œì— ê²”ë¡œ ì˜ì–‘ í¡ìˆ˜ ê°œì„ 

**ì¥ê±´ê°• í”„ë¡œê·¸ë¨ (ì†Œí™” ë¶ˆí¸í˜•):**
- ë³µë¶€íŒ½ë§Œ + ë³€ë¹„ ê²½í–¥ â†’ Formula 1 + ì…€-ìœ -ë¡œì“° + ì•¡í‹°ë¸Œ í™”ì´ë²„ + í”„ë¡œë°”ì´ì˜¤í‹± ì»´í”Œë ‰ìŠ¤
- ê°•ì¡°: "ì‹ì´ì„¬ìœ  + ìœ ì‚°ê·  ì¡°í•©ìœ¼ë¡œ ì¥ í™˜ê²½ì„ ì™„ì „íˆ ë°”ê¿”ë“œë¦½ë‹ˆë‹¤."
- ì¶”ê°€: í—ˆë²Œ ì•Œë¡œì— ê²” (ì•„ì¹¨/ì ì‹¬/ì €ë… 3íšŒ)

**ì—¬ì„±ê±´ê°• í”„ë¡œê·¸ë¨ (í˜¸ë¥´ëª¬ ê· í˜•í˜•):**
- ì²´ì§€ë°© ë¶„í¬ + ëŒ€ì‚¬ ê· í˜• â†’ Formula 1+2 + ë¦´ë ‰ì„¸ì´ì…˜ í‹° + í”„ë¡¤ë ˆì‚¬ ë“€ì˜¤
- ê°•ì¡°: "ì˜ì–‘ ê· í˜•ì„ ë§ì¶”ë©´ í˜¸ë¥´ëª¬ë„ ë”°ë¼ ì•ˆì •ë©ë‹ˆë‹¤."

**ë©´ì—­ê±´ê°• í”„ë¡œê·¸ë¨ (ë©´ì—­ë ¥ ì €í•˜í˜•):**
- ì¦ì€ ê°ê¸° + í”¼ë¡œ â†’ Formula 1+2 + ë§ˆì´ë®¨ í”ŒëŸ¬ìŠ¤ + í™ì‚¼ ì§„ì„¼ ê²”
- ê°•ì¡°: "ê¸°ì´ˆ ì˜ì–‘ë¶€í„° ì±„ìš°ê³ , ë©´ì—­ íŠ¹í™” ì œí’ˆìœ¼ë¡œ ë°©ì–´ë§‰ì„ ì„¸ì›ë‹ˆë‹¤."

**í˜ˆí–‰ê±´ê°• í”„ë¡œê·¸ë¨ (ìˆœí™˜ ê°œì„ í˜•):**
- ë‚´ì¥ì§€ë°© ë†’ìŒ + ë‚˜ì´ ê³ ë ¤ â†’ Formula 1+2 + ë‚˜ì´íŠ¸ì›ìŠ¤ + í—ˆë²Œ ì•Œë¡œì—
- ê°•ì¡°: "í˜ˆí–‰ ê°œì„ ì€ ë‚´ì¥ì§€ë°© ê´€ë¦¬ì™€ í•¨ê»˜ ê°€ì•¼ íš¨ê³¼ì ì…ë‹ˆë‹¤."

**í—¬ì”¨ì—ì´ì§• í”„ë¡œê·¸ë¨ (40ëŒ€ ì´ìƒ):**
- ê·¼ê°ì†Œì¦ ì˜ˆë°© + ëŒ€ì‚¬ ìœ ì§€ â†’ Formula 1+2+3 + ë‚˜ì´íŠ¸ì›ìŠ¤ + í”„ë¡œë°”ì´ì˜¤í‹±
- ê°•ì¡°: "ë‚˜ì´ê°€ ë“¤ìˆ˜ë¡ ë‹¨ë°±ì§ˆì´ ë” ì¤‘ìš”í•©ë‹ˆë‹¤. ê·¼ìœ¡ ì§€í‚¤ëŠ” ê²Œ ê±´ê°•í•œ ë…¸í™”ì˜ í•µì‹¬ì´ì—ìš”."

[ìƒë‹´ ìŠ¤í¬ë¦½íŠ¸ ì‘ì„± ì „ëµ - ì‹¤ì „ ë©˜íŠ¸]
ì´ˆë³´ ì½”ì¹˜ë„ ìì‹ ê° ìˆê²Œ ë§í•  ìˆ˜ ìˆë„ë¡, ê³ ê°ì´ ê³µê°í•˜ëŠ” ì–¸ì–´ë¡œ:

1. ì˜¤í”„ë‹ (ê³µê° + ê¸ì • + ìƒí™œ ìŠµê´€ ì¸ì •):
   "â—‹â—‹ë‹˜, ì¸ë°”ë”” ê²°ê³¼ ë³´ë‹ˆê¹Œ [êµ¬ì²´ì  ê¸ì • í¬ì¸íŠ¸]ì´ ì •ë§ ì¸ìƒì ì´ë„¤ìš”! 
    íŠ¹íˆ [ê¸ì • ìˆ˜ì¹˜]ëŠ” ê°™ì€ ì—°ë ¹ëŒ€ì—ì„œ ìƒìœ„ê¶Œì´ì—ìš”.
    í‰ì†Œì— [ì¶”ì • ìƒí™œ ìŠµê´€ - ì˜ˆ: ë¬¼ ë§ì´ ë“œì‹œê±°ë‚˜ / ê·œì¹™ì ìœ¼ë¡œ ìš´ë™í•˜ì‹œê±°ë‚˜]ì„ í•˜ì…¨ë˜ ê²Œ ëŠê»´ì§€ê±°ë“ ìš”."
   
   ì˜ˆì‹œ: "ê³¨ê²©ê·¼ëŸ‰ì´ â—‹â—‹kgì¸ ê±° ë³´ë‹ˆê¹Œ í‰ì†Œì— í™œë™ëŸ‰ì´ ìˆìœ¼ì‹  ë¶„ì´ì‹œë„¤ìš”!"

2. í•µì‹¬ ì´ìŠˆ ì„¤ëª… (ìˆ˜ì¹˜ â†’ ì¼ìƒ ì¦ìƒ ì—°ê²°):
   "ë‹¤ë§Œ í•œ ê°€ì§€ ì£¼ëª©í•  ë¶€ë¶„ì´ ìˆëŠ”ë°ìš”, [êµ¬ì²´ì  ì§€í‘œ]ê°€ [êµ¬ì²´ì  ìˆ˜ì¹˜]ë¡œ ë‚˜ì™”ì–´ìš”.
    í‘œì¤€ ë²”ìœ„ê°€ [XX-YY]ì¸ë° í˜„ì¬ [ZZ]ì´ê±°ë“ ìš”.
    í˜¹ì‹œ í‰ì†Œì— [ì¼ìƒ ì¦ìƒ - ì˜ˆ: ì˜¤í›„ë§Œ ë˜ë©´ í”¼ê³¤í•˜ì‹œê±°ë‚˜ / ë°°ê°€ ìì£¼ ë‚˜ì˜¤ì‹œê±°ë‚˜ / 
    ê³„ë‹¨ ì˜¤ë¥´ë©´ ìˆ¨ì´ ì°¨ì‹œê±°ë‚˜] ì´ëŸ° ê±° ëŠë¼ì‹œì§„ ì•Šìœ¼ì…¨ì–´ìš”?"
   
   ì˜ˆì‹œ: "ì²´ì§€ë°©ë¥ ì´ 35%ì¸ë°, í‘œì¤€ì´ 18-28%ì˜ˆìš”. í˜¹ì‹œ ë‹¤ì´ì–´íŠ¸í•´ë„ ì˜ ì•ˆ ë¹ ì§€ì…¨ì£ ?"

3. ì—°ê´€ì„± ì„¤ëª… (êµìœ¡ + ì´í•´ ìœ ë„):
   "ì‚¬ì‹¤ [ì§€í‘œA]ì™€ [ì§€í‘œB]ë¥¼ í•¨ê»˜ ë³´ë©´ ë” ì •í™•í•œë°ìš”,
    ì§€ê¸ˆ ëª¸ ìƒíƒœê°€ [êµ¬ì²´ì  ëŒ€ì‚¬ ìƒí™© - ì˜ˆ: ê·¼ìœ¡ì€ ë¶€ì¡±í•œë° ì§€ë°©ì€ ë§ì•„ì„œ / 
    ì˜ì–‘ì€ ë¶€ì¡±í•œë° ì¹¼ë¡œë¦¬ëŠ” ê³¼ë‹¤í•´ì„œ] ì´ëŸ° ìƒíƒœì˜ˆìš”.
    ê·¸ë˜ì„œ [ì¼ìƒ ë¶ˆí¸í•¨]ì´ ìƒê¸°ëŠ” ê±°ì£ ."
   
   ì˜ˆì‹œ: "ê³¨ê²©ê·¼ëŸ‰ì´ ì ìœ¼ë©´ ê¸°ì´ˆëŒ€ì‚¬ê°€ ë‚®ì•„ì ¸ì„œ ì¡°ê¸ˆë§Œ ë¨¹ì–´ë„ ì‚´ì´ ì°Œê²Œ ë¼ìš”."

4. ì†”ë£¨ì…˜ ì œì‹œ (êµ¬ì²´ì  + ì‹¤ì²œ ê°€ëŠ¥ + ì œí’ˆ ì—°ê²°):
   "ê·¸ë˜ì„œ ì œê°€ â—‹â—‹ë‹˜ê»˜ ë”± ë§ì¶°ì„œ ì œì•ˆë“œë¦¬ê³  ì‹¶ì€ ê²Œ [N]ê°€ì§€ì˜ˆìš”.
    
    ì²« ë²ˆì§¸, [ì‹¤ì²œë²• + ì œí’ˆ + ì´ìœ ]
    ì˜ˆ: ì•„ì¹¨ì„ Formula 1 ì‰ì´í¬ë¡œ ë°”ê¾¸ëŠ” ê±°ì˜ˆìš”. ìš°ì£¼ì‹ì´ë¼ê³  ë“¤ì–´ë³´ì…¨ì£ ? 
        90ì¹¼ë¡œë¦¬ì— ë‹¨ë°±ì§ˆ 9g, ë¹„íƒ€ë¯¼ 17ì¢…ì´ ë‹¤ ë“¤ì–´ìˆì–´ì„œ ì˜ì–‘ì€ ê½‰ ì±„ìš°ë©´ì„œ ì¹¼ë¡œë¦¬ëŠ” í™• ì¤„ì¼ ìˆ˜ ìˆì–´ìš”.
        ë‘ë¶€ 1ëª¨ ë¨¹ëŠ” ë‹¨ë°±ì§ˆì„ í•œ ì”ìœ¼ë¡œ í•´ê²°í•˜ëŠ” ê±°ì£ .
    
    ë‘ ë²ˆì§¸, [ì‹¤ì²œë²• + ì œí’ˆ + ì´ìœ ]
    ì˜ˆ: ì €ë… 30ë¶„ ì „ì— ì…€-ìœ -ë¡œì“° í•œ í¬ë¥¼ ë¬¼ 300mlì— íƒ€ì„œ ë“œì„¸ìš”.
        ì‹ì´ì„¬ìœ ê°€ ë°°ë¥¼ ì±„ì›Œì¤˜ì„œ ìì—°ìŠ¤ëŸ½ê²Œ ì €ë… ì‹ì‚¬ëŸ‰ì´ ì¤„ì–´ë“¤ì–´ìš”.
        ê·¸ëŸ¼ ë‚´ì¥ì§€ë°©ì´ í™• ë¹ ì§€ê¸° ì‹œì‘í•©ë‹ˆë‹¤.
    
    ì„¸ ë²ˆì§¸, [ì‹¤ì²œë²• + ì œí’ˆ + ì´ìœ ]
    ì˜ˆ: Formula 2 ë¹„íƒ€ë¯¼ì„ ì•„ì¹¨/ì €ë…ìœ¼ë¡œ ê¼­ ì±™ê²¨ ë“œì„¸ìš”.
        ê°ëŸ‰í•  ë•Œ ë¹„íƒ€ë¯¼ì´ ë¶€ì¡±í•˜ë©´ ëŒ€ì‚¬ê°€ ì•ˆ ëŒì•„ê°€ì„œ ì‚´ì´ ì•ˆ ë¹ ì ¸ìš”.
        ì´ê²Œ ì‰ì´í¬ë‘ ì§ê¿ìœ¼ë¡œ ë§ì¶°ì ¸ ìˆì–´ì„œ íš¨ê³¼ê°€ ë°°ê°€ ë©ë‹ˆë‹¤."

5. í´ë¡œì§• (ë™ê¸°ë¶€ì—¬ + ê¸°ëŒ€ íš¨ê³¼ + ì§€ì† ì§€ì›):
   "ì´ë ‡ê²Œ [ê¸°ê°„ - ì˜ˆ: í•œ ë‹¬]ë§Œ í•´ë³´ì‹œë©´ìš”,
    [êµ¬ì²´ì  ë³€í™” - ì˜ˆ: ì²´ì§€ë°© 3-4kg ë¹ ì§€ê³  / ì•„ì¹¨ì— ê°€ë¿í•˜ê²Œ ì¼ì–´ë‚˜ì‹œê³  / 
    ë°”ì§€ í—ˆë¦¬ê°€ í—ë í•´ì§€ëŠ” ê²Œ] ëŠê»´ì§€ì‹¤ ê±°ì˜ˆìš”.
    ì œê°€ ì¸ë°”ë”” ì²´í¬í•˜ë©´ì„œ ì˜†ì—ì„œ ê³„ì† ì‘ì›í•´ ë“œë¦´ê²Œìš”! 
    [ê¸°ê°„] í›„ì— ë‹¤ì‹œ ì¸ë°”ë”” ì°ìœ¼ë©´ â—‹â—‹ë‹˜ ê¹œì§ ë†€ë¼ì‹¤ ê±°ì˜ˆìš”!"
   
   ì˜ˆì‹œ: "2ì£¼ í›„ë¶€í„°ëŠ” ëª¸ì´ ê°€ë²¼ì›Œì§€ëŠ” ê²Œ í™•ì‹¤íˆ ëŠê»´ì§€ì‹¤ ê±°ê³ , 
         í•œ ë‹¬ í›„ë©´ ì£¼ë³€ì—ì„œ 'ì‚´ ë¹ ì§„ ê±° ì•„ë‹ˆì•¼?' ì†Œë¦¬ ë“¤ìœ¼ì‹¤ ê±°ì˜ˆìš”!"

[ì‹¤ì „ ë©˜íŠ¸ íŒ]
- "ìš°ì£¼ì‹", "ë‘ë¶€ 1ëª¨", "ë°¥ 2ìŠ¤í‘¼ ì¹¼ë¡œë¦¬" ê°™ì€ ë¹„ìœ  ì ê·¹ í™œìš©
- "ì§ê¿", "ë°˜ì°¬", "ì™ì™" ê°™ì€ ì¹œê·¼í•œ í‘œí˜„ ì‚¬ìš©
- êµ¬ì²´ì  ìˆ«ì (90ì¹¼ë¡œë¦¬, 9g ë‹¨ë°±ì§ˆ, 17ì¢… ë¹„íƒ€ë¯¼) ëª…í™•íˆ ì–¸ê¸‰
- ê³ ê° ì¼ìƒê³¼ ì—°ê²° ("ì˜¤í›„ë§Œ ë˜ë©´", "ê³„ë‹¨ ì˜¤ë¥´ë©´", "ë°”ì§€ í—ˆë¦¬ê°€")
- ê¸°ëŒ€ íš¨ê³¼ëŠ” êµ¬ì²´ì  ê¸°ê°„ê³¼ í•¨ê»˜ ("2ì£¼ í›„ë¶€í„°", "í•œ ë‹¬ í›„ë©´")
   "ê·¸ë˜ì„œ ì œê°€ ë“œë¦¬ê³  ì‹¶ì€ ì œì•ˆì€ í¬ê²Œ [N]ê°€ì§€ì¸ë°ìš”,
    ì²« ë²ˆì§¸, [êµ¬ì²´ì  ì‹¤ì²œë²• + ì œí’ˆ + ì´ìœ ]
    ë‘ ë²ˆì§¸, [êµ¬ì²´ì  ì‹¤ì²œë²• + ì œí’ˆ + ì´ìœ ]"

5. í´ë¡œì§• (ë™ê¸°ë¶€ì—¬):
   "[ê¸°ê°„] í›„ì—ëŠ” [êµ¬ì²´ì  ë³€í™” ì˜ˆì¸¡]ì´ ë³´ì¼ ê±°ì˜ˆìš”.
    ì œê°€ ì˜†ì—ì„œ ê³„ì† ì²´í¬í•´ ë“œë¦´ê²Œìš”!"

[SMS ì‘ì„± ì „ëµ]
300ì ì œí•œ, í•µì‹¬ë§Œ ì••ì¶•:
1. ì¸ì‚¬ + í•µì‹¬ ìˆ˜ì¹˜ 1ì¤„
2. ê°€ì¥ ì¤‘ìš”í•œ í¬ì¸íŠ¸ 2ì¤„
3. ì œí’ˆ ì œì•ˆ 2ì¤„ (ì•„ì¹¨/ì €ë…)
4. ë‹¤ìŒ ì•¡ì…˜ 1ì¤„

[ì˜µì…˜ ë°˜ì˜ - ê°•í™”]
- ëª©í‘œ(goal)ê°€ "ì²´ì§€ë°© ìš°ì„ ":
  * ì²´ì§€ë°©/ë‚´ì¥ì§€ë°© ìˆ˜ì¹˜ë¥¼ ë¨¼ì € ì–¸ê¸‰
  * ëŒ€ì‚¬ í™œì„±í™” ì œí’ˆ(í† íƒˆì»¨íŠ¸ë¡¤, N-R-G) ìš°ì„  ì œì•ˆ
  * ì‹ì‚¬ ëŒ€ì²´(í¬ë®¬ëŸ¬1) 1-2íšŒë¡œ ì¹¼ë¡œë¦¬ ì¡°ì ˆ ê°•ì¡°
  
- ëª©í‘œ(goal)ê°€ "ê·¼ìœ¡ ìš°ì„ ":
  * ê³¨ê²©ê·¼ëŸ‰/ê¸°ì´ˆëŒ€ì‚¬ëŸ‰ ë¨¼ì € ì–¸ê¸‰
  * ë‹¨ë°±ì§ˆ ì œí’ˆ(í¬ë®¬ëŸ¬3) ì¶”ê°€ ì„­ì·¨ ê°•ì¡°
  * ìš´ë™ ì „í›„ ì˜ì–‘ íƒ€ì´ë° ìƒì„¸ ì„¤ëª…
  
- ëª©í‘œ(goal)ê°€ "ê· í˜•":
  * ê·¼ìœ¡ê³¼ ì²´ì§€ë°© ê· í˜• ìˆê²Œ ë‹¤ë£¸
  * ê¸°ë³¸ ë£¨í‹´(í¬ë®¬ëŸ¬1 + í¬ë®¬ëŸ¬2) ì¤‘ì‹¬
  
- ë§íˆ¬(tone) "ë¶€ë“œëŸ½ê²Œ":
  * "~ë„¤ìš”", "~ê±°ì˜ˆìš”", "~í•´ë³´ì„¸ìš”" ë§íˆ¬
  * ê²©ë ¤ì™€ ê³µê° í‘œí˜„ ë§ì´ ì‚¬ìš©
  * ë¶€ë‹´ìŠ¤ëŸ½ì§€ ì•Šì€ ì œì•ˆ
  
- ë§íˆ¬(tone) "ì „ë¬¸ê°€ìŠ¤ëŸ½ê²Œ":
  * "~ì…ë‹ˆë‹¤", "~í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤" ë§íˆ¬
  * ì˜í•™ì /ê³¼í•™ì  ìš©ì–´ ì •í™•íˆ ì‚¬ìš©
  * ê·¼ê±° ê¸°ë°˜ ì„¤ëª… ê°•ì¡°
  
- ë§íˆ¬(tone) "ë§¤ìš° ê°„ë‹¨íˆ":
  * ì§§ì€ ë¬¸ì¥, í•µì‹¬ë§Œ
  * ë¶ˆí•„ìš”í•œ ì„¤ëª… ìµœì†Œí™”

[ì¶œë ¥ ê·œì¹™ - ìƒì„¸ ê°€ì´ë“œ]
ë°˜ë“œì‹œ ì•„ë˜ JSON í˜•ì‹ìœ¼ë¡œë§Œ ì¶œë ¥. JSON ì™¸ í…ìŠ¤íŠ¸ ì¼ì²´ ê¸ˆì§€.

**one_line_summary**: 
ì „ì²´ ê²°ê³¼ë¥¼ í•œ ë¬¸ì¥ìœ¼ë¡œ ìš”ì•½. ê°€ì¥ ì¸ìƒì ì¸ í¬ì¸íŠ¸ 1ê°œ + ê°œì„  ë°©í–¥ ì œì‹œ.
ì˜ˆ: "ê³¨ê²©ê·¼ëŸ‰ì´ í‘œì¤€ë³´ë‹¤ 2kg ë¶€ì¡±í•˜ì§€ë§Œ, ì²´ì§€ë°© ê´€ë¦¬ê°€ ì˜ ë˜ê³  ìˆì–´ ë‹¨ë°±ì§ˆ ë³´ê°•ì— ì§‘ì¤‘í•˜ë©´ ë¹ ë¥¸ ê°œì„ ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤."

**metrics**: 
ê° ì§€í‘œë§ˆë‹¤:
- value: ì •í™•í•œ ìˆ˜ì¹˜ + ë‹¨ìœ„ (ì˜ˆ: "65.3kg", "24.5%", "ë ˆë²¨ 8")
- status: í‘œì¤€ ë²”ìœ„ ê¸°ì¤€ íŒë‹¨
  * "ì •ìƒ": í‘œì¤€ ë²”ìœ„ ë‚´
  * "ì£¼ì˜": í‘œì¤€ ë²”ìœ„ ê²½ê³„ì„ 
  * "ê°œì„  í•„ìš”": í‘œì¤€ ë²”ìœ„ ë²—ì–´ë‚¨

**interpretation**: ë°˜ë“œì‹œ 3ê°œ ì¹´ë“œ, ê°ê° ìƒì„¸íˆ:
1. ê·¼ìœ¡ êµ¬ì¡° ë¶„ì„ (ê³¨ê²©ê·¼ëŸ‰ ì¤‘ì‹¬)
   - title: "ê·¼ìœ¡ëŸ‰ê³¼ ê¸°ì´ˆëŒ€ì‚¬ ìƒíƒœ"
   - detail: ê³¨ê²©ê·¼ëŸ‰ ìˆ˜ì¹˜, í‘œì¤€ ëŒ€ë¹„ ë¹„êµ, ê¸°ì´ˆëŒ€ì‚¬ëŸ‰ ì˜í–¥, ì¼ìƒ ì²´ë ¥ ì—°ê²° (ìµœì†Œ 3-4ë¬¸ì¥)

2. ì²´ì§€ë°© êµ¬ì¡° ë¶„ì„ (ì²´ì§€ë°©ë¥ , ë‚´ì¥ì§€ë°© ì¤‘ì‹¬)
   - title: "ì²´ì§€ë°© ë¶„í¬ì™€ ëŒ€ì‚¬ ê±´ê°•"
   - detail: ì²´ì§€ë°©ë¥ , ë‚´ì¥ì§€ë°© ìˆ˜ì¹˜, ë³µë¶€ì§€ë°©ë¥ , ëŒ€ì‚¬ ë¦¬ìŠ¤í¬, ê±´ê°• ì˜í–¥ (ìµœì†Œ 3-4ë¬¸ì¥)

3. ì¢…í•© ë°¸ëŸ°ìŠ¤ (ì „ì²´ ì²´ì„±ë¶„ ê· í˜•)
   - title: "ì²´ì„±ë¶„ ë°¸ëŸ°ìŠ¤ì™€ ê°œì„  ë°©í–¥"
   - detail: ê·¼ìœ¡ vs ì§€ë°© ê· í˜•, ìš°ì„  ê°œì„  í¬ì¸íŠ¸, í˜„ì‹¤ì  ëª©í‘œ (ìµœì†Œ 3-4ë¬¸ì¥)

**herbalife_solution.daily_routine**: 
ì•„ì¹¨/ì ì‹¬/ì €ë… ê°ê° ìµœì†Œ 2-3ê°œ ì•„ì´í…œì”©:
- product: ì •í™•í•œ ì œí’ˆëª… (ìœ„ í—ˆë²Œë¼ì´í”„ ì œí’ˆ ëª©ë¡ì—ì„œë§Œ)
- why: ì´ ì œí’ˆì´ í•„ìš”í•œ ì´ìœ  (ì¸ë°”ë”” ìˆ˜ì¹˜ì™€ ì—°ê²°, 2-3ë¬¸ì¥)
- how: êµ¬ì²´ì  ì„­ì·¨ ë°©ë²• (ì‹œê°„, ìš©ëŸ‰, ë¬¼ ì–‘, í˜¼í•© ë°©ë²• ë“± ë””í…Œì¼í•˜ê²Œ)

ì˜ˆì‹œ:
{
  "timing": "ì•„ì¹¨",
  "items": [
    {
      "product": "Formula 1 ê±´ê°•í•œ ì‹ì‚¬ (ì¿ í‚¤ì•¤í¬ë¦¼ë§›)",
      "why": "ê³¨ê²©ê·¼ëŸ‰ì´ í‘œì¤€ë³´ë‹¤ 3kg ë¶€ì¡±í•´ í•˜ë£¨ ë‹¨ë°±ì§ˆ 75gì´ í•„ìš”í•©ë‹ˆë‹¤. Formula 1ì€ ë‹¨ë°±ì§ˆ 9g + 17ê°€ì§€ ë¹„íƒ€ë¯¼Â·ë¬´ê¸°ì§ˆì„ 200kcalë¡œ ì œê³µí•˜ì—¬ ì¹¼ë¡œë¦¬ëŠ” ì¡°ì ˆí•˜ë©´ì„œ ì˜ì–‘ì€ ì±„ìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. íŠ¹íˆ ì•„ì¹¨ ì‹ì‚¬ ëŒ€ì²´ë¡œ ê°€ì¥ íš¨ê³¼ì ì…ë‹ˆë‹¤.",
      "how": "ì¼ì–´ë‚˜ì„œ 30ë¶„ ì´ë‚´, ë¬¼ 250ml + ì €ì§€ë°©ìš°ìœ  200mlì— ì‰ì´í¬ 2ìŠ¤í‘¼(26g)ì„ ë„£ê³  ì‰ì´ì»¤ë¡œ 20ì´ˆê°„ í”ë“¤ì–´ ë§ˆì‹œì„¸ìš”. ìš°ìœ  ëŒ€ì‹  ë‘ìœ ë‚˜ ì•„ëª¬ë“œë°€í¬ë„ ê°€ëŠ¥í•©ë‹ˆë‹¤. ê°€ê²©: 63,000ì›"
    },
    {
      "product": "Formula 3 í¼ìŠ¤ë„ ë‹¨ë°±ì§ˆ íŒŒìš°ë”",
      "why": "ì‰ì´í¬ë§Œìœ¼ë¡œ ë¶€ì¡±í•œ ë‹¨ë°±ì§ˆì„ ì¶”ê°€ ë³´ì¶©í•©ë‹ˆë‹¤. ê·¼ìœ¡ í•©ì„±ì€ ì•„ì¹¨ì— ê°€ì¥ í™œë°œí•˜ë¯€ë¡œ ì•„ì¹¨ ë‹¨ë°±ì§ˆ ì„­ì·¨ê°€ ì¤‘ìš”í•©ë‹ˆë‹¤. ìˆœìˆ˜ ë‹¨ë°±ì§ˆ ë³´ì¶©ìœ¼ë¡œ ê·¼ìœ¡ëŸ‰ ì¦ê°€ì— ì§ì ‘ ê¸°ì—¬í•©ë‹ˆë‹¤.",
      "how": "ìœ„ ì‰ì´í¬ì— 1ìŠ¤í‘¼(6g) ì¶”ê°€í•˜ì—¬ í•¨ê»˜ ì„­ì·¨í•˜ì„¸ìš”. ì´ ë‹¨ë°±ì§ˆ 15g ì´ìƒìœ¼ë¡œ ì•„ì¹¨ ë‹¨ë°±ì§ˆ ëª©í‘œë¥¼ ë‹¬ì„±í•©ë‹ˆë‹¤. ê°€ê²©: 65,600ì›"
    },
    {
      "product": "Formula 2 ë©€í‹°ë¹„íƒ€ë¯¼Â·ë¬´ê¸°ì§ˆ ì»´í”Œë ‰ìŠ¤",
      "why": "12ê°€ì§€ ë¹„íƒ€ë¯¼ + 9ê°€ì§€ ë¬´ê¸°ì§ˆ + 5ê°€ì§€ ì‹ë¬¼ì„±ë¶„ìœ¼ë¡œ ì¢…í•© ì˜ì–‘ì„ ë³´ì¶©í•©ë‹ˆë‹¤. íŠ¹íˆ ê³¨ê²©ê·¼ í•©ì„±ì— í•„ìš”í•œ ë¹„íƒ€ë¯¼D, ë§ˆê·¸ë„¤ìŠ˜, ì•„ì—°ì´ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.",
      "how": "ì•„ì¹¨ ì‹ì‚¬(ì‰ì´í¬) ì§í›„ 1ì •ì„ ë¬¼ê³¼ í•¨ê»˜ ì„­ì·¨í•˜ì„¸ìš”. ì§€ìš©ì„± ë¹„íƒ€ë¯¼ í¡ìˆ˜ë¥¼ ìœ„í•´ ì‹í›„ ë³µìš©ì´ ì¤‘ìš”í•©ë‹ˆë‹¤. ê°€ê²©: 33,300ì›"
    }
  ]
}

**herbalife_solution.fat_management**: 
ì²´ì§€ë°© ê´€ë¦¬ í¬ì¸íŠ¸ 2-3ê°œ, ê°ê°:
- point: êµ¬ì²´ì  ê´€ë¦¬ í¬ì¸íŠ¸ (ì¸ë°”ë”” ìˆ˜ì¹˜ ê¸°ë°˜)
- action: ì‹¤ì²œ ë°©ë²• (ì‹ìŠµê´€ + ìƒí™œ ìŠµê´€ êµ¬ì²´ì ìœ¼ë¡œ)
- product_suggestion: ê´€ë ¨ ì œí’ˆ + ê°„ë‹¨í•œ ì´ìœ 

ì˜ˆì‹œ:
{
  "point": "ë‚´ì¥ì§€ë°© ë ˆë²¨ 12ë¡œ í‘œì¤€(1-9)ì„ í¬ê²Œ ì´ˆê³¼í•˜ì—¬ ëŒ€ì‚¬ ê±´ê°• ê°œì„ ì´ ì‹œê¸‰í•©ë‹ˆë‹¤. ë³µë¶€ì§€ë°©ë¥ ë„ 0.92ë¡œ ë†’ì•„ ì‹¬í˜ˆê´€ ê±´ê°•ì— ì£¼ì˜ê°€ í•„ìš”í•©ë‹ˆë‹¤.",
  "action": "ì €ë… ì‹ì‚¬ë¥¼ Formula 1 ì‰ì´í¬ë¡œ ëŒ€ì²´í•˜ê³ , í° ìŒ€ë°¥ ëŒ€ì‹  í˜„ë¯¸ ë°˜ê³µê¸°, íŠ€ê¹€/ë³¶ìŒ ëŒ€ì‹  ì°œ/êµ¬ì´ë¡œ ì¡°ë¦¬í•˜ì„¸ìš”. ì €ë… 8ì‹œ ì´í›„ ê°„ì‹ì„ ëŠê³ , í•˜ë£¨ 30ë¶„ ì´ìƒ ë¹¨ë¦¬ ê±·ê¸°ë¥¼ ì‹¤ì²œí•˜ì„¸ìš”. ë¬¼ì€ í•˜ë£¨ 2L ì´ìƒ ë§ˆì‹œê³ , íŠ¹íˆ ì‹ì „ 30ë¶„ì— ë¬¼ 300mlë¥¼ ë§ˆì‹œë©´ í¬ë§Œê°ì— ë„ì›€ë©ë‹ˆë‹¤.",
  "product_suggestion": "í—ˆë²Œ ë² ë²„ë¦¬ì§€(77,300ì›)ë¥¼ ì˜¤ì „ 10ì‹œ, ì˜¤í›„ 3ì‹œì— ë¬¼ 350mlì— 2ìŠ¤í‘¼ íƒ€ì„œ ë§ˆì‹œë©´ ì—ë„ˆì§€ ëŒ€ì‚¬ë¥¼ í™œì„±í™”í•©ë‹ˆë‹¤. ì…€-ìœ -ë¡œì“°(32,800ì›)ë¥¼ ì €ë… ì‹ì‚¬ 30ë¶„ ì „ ë¬¼ 300mlì— 1í¬ íƒ€ì„œ ë§ˆì‹œë©´ ì‹ì´ì„¬ìœ ë¡œ í¬ë§Œê°ì„ ë†’ì´ê³  ì¹¼ë¡œë¦¬ ì„­ì·¨ë¥¼ ì¤„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì›” ë¹„ìš©: ì•½ 110,100ì›"
}

**herbalife_solution.muscle_metabolism**: 
ê·¼ìœ¡/ëŒ€ì‚¬ ê´€ë¦¬ í¬ì¸íŠ¸ 2-3ê°œ (ìœ„ì™€ ë™ì¼í•œ ìƒì„¸ë„)

**coach_script**: 
ë°˜ë“œì‹œ 5-7ë¬¸ì¥, ì‹¤ì œ ìƒë‹´ì²˜ëŸ¼:
1. ì˜¤í”„ë‹ (ê³µê° + ê¸ì • 1-2ë¬¸ì¥)
2. í•µì‹¬ ì´ìŠˆ ì„¤ëª… (ìˆ˜ì¹˜ ê¸°ë°˜ 2-3ë¬¸ì¥)
3. ì†”ë£¨ì…˜ ì œì‹œ (êµ¬ì²´ì  1-2ë¬¸ì¥)
4. ë™ê¸°ë¶€ì—¬ ë§ˆë¬´ë¦¬ (1ë¬¸ì¥)

ê° ë¬¸ì¥ì€ ìµœì†Œ 20ì ì´ìƒ, êµ¬ì²´ì  ìˆ˜ì¹˜ì™€ ì œí’ˆëª… í¬í•¨.

**sms_result**: 
ì •í™•íˆ 250-300ì (ê³µë°± í¬í•¨):
- 1ì¤„: ì¸ì‚¬ + í•µì‹¬ ìš”ì•½
- 2ì¤„: ê°€ì¥ ì¤‘ìš”í•œ ìˆ˜ì¹˜ 2ê°œ
- 2ì¤„: ì œí’ˆ ì œì•ˆ (ì•„ì¹¨/ì €ë…)
- 1ì¤„: ë‹¤ìŒ ì•¡ì…˜
- ì´ëª¨ì§€ ì ì ˆíˆ ì‚¬ìš© (ğŸ’ª, ğŸ”¥, âœ¨ ë“±)

{
  "one_line_summary": "",
  "metrics": [
    {"name":"ì²´ì¤‘","value":"","status":"ì •ìƒ|ì£¼ì˜|ê°œì„  í•„ìš”"},
    {"name":"ê³¨ê²©ê·¼ëŸ‰","value":"","status":"ì •ìƒ|ì£¼ì˜|ê°œì„  í•„ìš”"},
    {"name":"ì²´ì§€ë°©ëŸ‰","value":"","status":"ì •ìƒ|ì£¼ì˜|ê°œì„  í•„ìš”"},
    {"name":"ì²´ì§€ë°©ë¥ ","value":"","status":"ì •ìƒ|ì£¼ì˜|ê°œì„  í•„ìš”"},
    {"name":"BMI","value":"","status":"ì •ìƒ|ì£¼ì˜|ê°œì„  í•„ìš”"},
    {"name":"ë³µë¶€ì§€ë°©ë¥ (WHR)","value":"","status":"ì •ìƒ|ì£¼ì˜|ê°œì„  í•„ìš”"},
    {"name":"ë‚´ì¥ì§€ë°© ë ˆë²¨","value":"","status":"ì •ìƒ|ì£¼ì˜|ê°œì„  í•„ìš”"}
  ],
  "interpretation": [
    {"title":"ê·¼ìœ¡ëŸ‰ê³¼ ê¸°ì´ˆëŒ€ì‚¬ ìƒíƒœ","detail":"ê³¨ê²©ê·¼ëŸ‰ í˜„í™©, í‘œì¤€ ëŒ€ë¹„, ê¸°ì´ˆëŒ€ì‚¬ ì˜í–¥, ì²´ë ¥ ì—°ê²° (3-4ë¬¸ì¥ ì´ìƒ)"},
    {"title":"ì²´ì§€ë°© ë¶„í¬ì™€ ëŒ€ì‚¬ ê±´ê°•","detail":"ì²´ì§€ë°©ë¥ , ë‚´ì¥ì§€ë°©, ë³µë¶€ì§€ë°©ë¥ , ê±´ê°• ë¦¬ìŠ¤í¬ (3-4ë¬¸ì¥ ì´ìƒ)"},
    {"title":"ì²´ì„±ë¶„ ë°¸ëŸ°ìŠ¤ì™€ ê°œì„  ë°©í–¥","detail":"ê·¼ìœ¡/ì§€ë°© ê· í˜•, ìš°ì„ ìˆœìœ„, í˜„ì‹¤ì  ëª©í‘œ (3-4ë¬¸ì¥ ì´ìƒ)"}
  ],
  "herbalife_solution": {
    "daily_routine": [
      {
        "timing":"ì•„ì¹¨",
        "items":[
          {
            "product":"í¬ë®¬ëŸ¬1 ì‰ì´í¬",
            "why":"ì¸ë°”ë”” ìˆ˜ì¹˜ ê¸°ë°˜ í•„ìš” ì´ìœ  2-3ë¬¸ì¥",
            "how":"êµ¬ì²´ì  ì„­ì·¨ ë°©ë²•: ì‹œê°„, ìš©ëŸ‰, ë¬¼ ì–‘, í˜¼í•© ë°©ë²•"
          },
          {
            "product":"í¬ë®¬ëŸ¬2 ë©€í‹°ë¹„íƒ€ë¯¼",
            "why":"í•„ìš” ì´ìœ  ìƒì„¸",
            "how":"ì„­ì·¨ ë°©ë²• ìƒì„¸"
          }
        ]
      },
      {
        "timing":"ì ì‹¬",
        "items":[
          {
            "product":"ì œí’ˆëª…",
            "why":"ì´ìœ  ìƒì„¸",
            "how":"ë°©ë²• ìƒì„¸"
          }
        ]
      },
      {
        "timing":"ì €ë…",
        "items":[
          {
            "product":"ì œí’ˆëª…",
            "why":"ì´ìœ  ìƒì„¸",
            "how":"ë°©ë²• ìƒì„¸"
          }
        ]
      }
    ],
    "fat_management": [
      {
        "point":"êµ¬ì²´ì  ê´€ë¦¬ í¬ì¸íŠ¸ (ìˆ˜ì¹˜ í¬í•¨)",
        "action":"ìƒì„¸í•œ ì‹¤ì²œ ë°©ë²• (ì‹ìŠµê´€ + ìƒí™œìŠµê´€)",
        "product_suggestion":"ì œí’ˆ + ì´ìœ "
      },
      {
        "point":"ë‘ ë²ˆì§¸ í¬ì¸íŠ¸",
        "action":"ì‹¤ì²œ ë°©ë²•",
        "product_suggestion":"ì œí’ˆ ì œì•ˆ"
      }
    ],
    "muscle_metabolism": [
      {
        "point":"êµ¬ì²´ì  ê´€ë¦¬ í¬ì¸íŠ¸ (ìˆ˜ì¹˜ í¬í•¨)",
        "action":"ìƒì„¸í•œ ì‹¤ì²œ ë°©ë²•",
        "product_suggestion":"ì œí’ˆ + ì´ìœ "
      },
      {
        "point":"ë‘ ë²ˆì§¸ í¬ì¸íŠ¸",
        "action":"ì‹¤ì²œ ë°©ë²•",
        "product_suggestion":"ì œí’ˆ ì œì•ˆ"
      }
    ],
    "compliance_note":"í—ˆë²Œë¼ì´í”„ëŠ” ê±´ê°•í•œ ì‹ìŠµê´€ ë° ì˜ì–‘ ë³´ì¶©ì„ ì§€ì›í•˜ëŠ” ì œí’ˆì´ë©°, ì˜í•™ì  ì¹˜ë£Œë‚˜ ì§„ë‹¨ ëª©ì ì´ ì•„ë‹™ë‹ˆë‹¤. ê°œì¸ë³„ ê±´ê°• ìƒíƒœì— ë”°ë¼ ì „ë¬¸ê°€ì™€ ìƒë‹´í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤."
  },
  "coach_script": [
    "ì˜¤í”„ë‹: ê³µê° + ê¸ì • (êµ¬ì²´ì  ìˆ˜ì¹˜ ì–¸ê¸‰)",
    "í•µì‹¬ ì´ìŠˆ: ê°€ì¥ ì¤‘ìš”í•œ ì§€í‘œ ì„¤ëª… (í‘œì¤€ ë²”ìœ„ ëŒ€ë¹„)",
    "ì—°ê´€ì„±: ì—¬ëŸ¬ ì§€í‘œ ê°„ ê´€ê³„ ì„¤ëª…",
    "ì†”ë£¨ì…˜: êµ¬ì²´ì  ì œí’ˆ + ì‹¤ì²œ ë°©ë²•",
    "ë™ê¸°ë¶€ì—¬: ê¸°ëŒ€ íš¨ê³¼ + ì‘ì›"
  ],
  "guide_4weeks": [
    {"week":"1ì£¼","focus":"ì ì‘ê¸°: ì œí’ˆ ì„­ì·¨ ìŠµê´€í™”","checkpoints":["ë§¤ì¼ ì•„ì¹¨ ì‰ì´í¬ ì„­ì·¨","ë¬¼ 2L ë§ˆì‹œê¸°","ì²´ì¤‘/ì»¨ë””ì…˜ ê¸°ë¡"]},
    {"week":"2ì£¼","focus":"ë³€í™” ì‹œì‘: ëŒ€ì‚¬ í™œì„±í™”","checkpoints":["ì œí’ˆ ì„­ì·¨ + ìš´ë™ ë³‘í–‰","ê°„ì‹ ì¡°ì ˆ","ìˆ˜ë©´ 7ì‹œê°„"]},
    {"week":"3ì£¼","focus":"ê°€ì†í™”: ì²´ì„±ë¶„ ë³€í™”","checkpoints":["ì¸ë°”ë”” ì¤‘ê°„ ì¸¡ì •","ì‹ìŠµê´€ ê°œì„  ì ê²€","ëª©í‘œ ì¬ì„¤ì •"]},
    {"week":"4ì£¼","focus":"ì •ì°©ê¸°: ìƒí™œ ìŠµê´€í™”","checkpoints":["ìµœì¢… ì¸ë°”ë”” ì¸¡ì •","ì „í›„ ë¹„êµ","ë‹¤ìŒ ëª©í‘œ ìˆ˜ë¦½"]}
  ],
  "sms_result": "250-300ì (ê³µë°± í¬í•¨), ì´ëª¨ì§€ í¬í•¨, ì‹¤ì œ ë¬¸ìì²˜ëŸ¼"
}

**[ìµœì¢… ì¤‘ìš” ì§€ì¹¨]**
1. ìœ„ JSON êµ¬ì¡°ë¥¼ ì •í™•íˆ ë”°ë¥´ì„¸ìš”
2. ëª¨ë“  í•„ë“œë¥¼ ë¹ ì§ì—†ì´ ì±„ìš°ì„¸ìš”
3. JSON ì™¸ì˜ í…ìŠ¤íŠ¸ëŠ” ì ˆëŒ€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”
4. ì„¤ëª…ì´ë‚˜ ì£¼ì„ì„ ì¶”ê°€í•˜ì§€ ë§ˆì„¸ìš”  
5. ìœ íš¨í•œ JSON í˜•ì‹ì¸ì§€ í™•ì¸í•˜ì„¸ìš”
6. ë°˜ë“œì‹œ { ë¡œ ì‹œì‘í•˜ê³  } ë¡œ ëë‚˜ì•¼ í•©ë‹ˆë‹¤`

    const userPrompt = `[ì›°ë‹ˆìŠ¤ ì½”ì¹­ ìƒë‹´ ìš”ì²­]

ì´ê²ƒì€ ì²´ì„±ë¶„ ì¸¡ì • ê²°ê³¼(InBody)ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ ì›°ë‹ˆìŠ¤ ì½”ì¹­ ìƒë‹´ì…ë‹ˆë‹¤.
ì˜ë£Œ ì§„ë‹¨ì´ë‚˜ ì¹˜ë£Œê°€ ì•„ë‹Œ, ê±´ê°•í•œ ë¼ì´í”„ìŠ¤íƒ€ì¼ê³¼ ì˜ì–‘ ê³„íšì„ ìœ„í•œ ë¶„ì„ì…ë‹ˆë‹¤.

ëª©í‘œ: ${goal}
ë§íˆ¬: ${tone}

ìœ„ ì²´ì„±ë¶„ ë¶„ì„ ê²°ê³¼ ì´ë¯¸ì§€ë¥¼ ë³´ê³ , ì›°ë‹ˆìŠ¤ ì½”ì¹­ ê´€ì ì—ì„œ ì˜ì–‘ ë³´ì¶© ê³„íšì„ 
ë°˜ë“œì‹œ ìˆœìˆ˜í•œ JSON í˜•ì‹ìœ¼ë¡œë§Œ ì¶œë ¥í•´ì£¼ì„¸ìš”.

ì¤‘ìš”:
1. JSON ì´ì™¸ì˜ í…ìŠ¤íŠ¸ëŠ” ì ˆëŒ€ í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”
2. ì„¤ëª…ì´ë‚˜ ì£¼ì„ì„ ì¶”ê°€í•˜ì§€ ë§ˆì„¸ìš”
3. ë°˜ë“œì‹œ ì¤‘ê´„í˜¸ { ë¡œ ì‹œì‘í•˜ê³  } ë¡œ ëë‚˜ì•¼ í•©ë‹ˆë‹¤
4. ëª¨ë“  ë¬¸ìì—´ì€ ë°˜ë“œì‹œ í°ë”°ì˜´í‘œ " "ë¡œ ê°ì‹¸ì•¼ í•©ë‹ˆë‹¤
5. JSON í˜•ì‹ì´ ìœ íš¨í•´ì•¼ í•©ë‹ˆë‹¤ (ì‰¼í‘œ, ê´„í˜¸ ë“± ë¬¸ë²• í™•ì¸)`

    // OpenAI API í˜¸ì¶œ
    const apiKey = c.env.OPENAI_API_KEY || process.env.OPENAI_API_KEY
    const baseURL = c.env.OPENAI_BASE_URL || process.env.OPENAI_BASE_URL || 'https://api.openai.com/v1'

    if (!apiKey) {
      return c.json({ 
        error: 'API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. OpenAI API í‚¤ë¥¼ ì„¤ì •í•´ì£¼ì„¸ìš”.' 
      }, 500)
    }

    const response = await fetch(`${baseURL}/chat/completions`, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': `Bearer ${apiKey}`
      },
      body: JSON.stringify({
        model: 'gpt-4o',
        messages: [
          { role: 'system', content: systemPrompt },
          {
            role: 'user',
            content: [
              { type: 'text', text: userPrompt },
              { type: 'image_url', image_url: { url: imageUrl } }
            ]
          }
        ],
        max_tokens: 8000,
        temperature: 0.8
      })
    })

    if (!response.ok) {
      const errorText = await response.text()
      console.error('OpenAI API Error:', response.status, response.statusText)
      console.error('Error details:', errorText)
      return c.json({ 
        error: `AI ë¶„ì„ ì‹¤íŒ¨: ${response.status} ${response.statusText}`,
        details: errorText
      }, 500)
    }

    const data = await response.json()
    const content = data.choices[0]?.message?.content || ''
    
    console.log('AI Response length:', content.length)
    console.log('AI Response preview:', content.substring(0, 200))

    console.log('AI Response length:', content.length)
    console.log('AI Response preview:', content.substring(0, 200))

    // JSON ì¶”ì¶œ (ì—¬ëŸ¬ ë°©ë²• ì‹œë„)
    let jsonString = ''
    
    // ë°©ë²• 1: ```json ì½”ë“œ ë¸”ë¡ ì•ˆì˜ JSON
    const codeBlockMatch = content.match(/```json\s*([\s\S]*?)\s*```/)
    if (codeBlockMatch) {
      jsonString = codeBlockMatch[1].trim()
    } else {
      // ë°©ë²• 2: ì²« { ë¶€í„° ë§ˆì§€ë§‰ } ê¹Œì§€
      const jsonMatch = content.match(/\{[\s\S]*\}/)
      if (jsonMatch) {
        jsonString = jsonMatch[0]
      }
    }

    if (!jsonString) {
      console.error('No JSON found in response')
      return c.json({ 
        error: 'AI ì‘ë‹µì—ì„œ JSONì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.', 
        raw_response: content.substring(0, 500)
      }, 500)
    }

    try {
      const result = JSON.parse(jsonString)
      console.log('JSON parsed successfully')
      return c.json(result)
    } catch (parseError) {
      console.error('JSON parse error:', parseError)
      console.error('Failed JSON string preview:', jsonString.substring(0, 500))
      return c.json({ 
        error: 'JSON íŒŒì‹± ì‹¤íŒ¨. AI ì‘ë‹µ í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.', 
        raw_response: content.substring(0, 500),
        parse_error: parseError instanceof Error ? parseError.message : 'Unknown error'
      }, 500)
    }

  } catch (error) {
    console.error('Error:', error)
    return c.json({ 
      error: error instanceof Error ? error.message : 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.' 
    }, 500)
  }
})

// ì¬ë¶„ì„ API (ìˆ˜ì •ëœ ìˆ˜ì¹˜ë¡œ)
app.post('/api/reanalyze', async (c) => {
  try {
    const body = await c.req.json()
    const { metrics, goal, tone, original_summary } = body

    if (!metrics || !Array.isArray(metrics)) {
      return c.json({ error: 'ìˆ˜ì¹˜ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.' }, 400)
    }

    // ìˆ˜ì¹˜ë¥¼ í…ìŠ¤íŠ¸ë¡œ ë³€í™˜
    const metricsText = metrics.map(m => `${m.name}: ${m.value} (${m.status})`).join('\n')

    // ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ (ë™ì¼)
    const systemPrompt = `[IMPORTANT DISCLAIMER]
This is NOT medical diagnosis or treatment. This is a wellness coaching analysis for nutritional supplement recommendations based on body composition data from a commercial InBody device.

[ë©´ì±…ì¡°í•­ - ì›°ë‹ˆìŠ¤ ì½”ì¹­ ëª©ì ]
ì´ ë¶„ì„ì€ ì˜ë£Œ ì§„ë‹¨, ì§ˆë³‘ ì¹˜ë£Œ, ì²˜ë°©ì´ ì•„ë‹™ë‹ˆë‹¤.
ìƒìš© ì²´ì„±ë¶„ ë¶„ì„ ê¸°ê¸°(InBody)ì˜ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ ì›°ë‹ˆìŠ¤ ì½”ì¹­ ë° ì˜ì–‘ ë³´ì¶©ì œ ì¶”ì²œì…ë‹ˆë‹¤.

ì—­í• : í—ˆë²Œë¼ì´í”„ í”„ë¦¬ë¯¸ì–´ ì›°ë‹ˆìŠ¤ ì½”ì¹˜ì´ì ì¸ë°”ë”” ì²´ì„±ë¶„ ë¶„ì„ ì „ë¬¸ê°€

ì•„ë˜ ì¸ë°”ë”” ìˆ˜ì¹˜ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì›°ë‹ˆìŠ¤ ì½”ì¹­ ë¶„ì„ ê²°ê³¼ë¥¼ JSON í˜•ì‹ìœ¼ë¡œ ìƒì„±í•˜ì„¸ìš”.`

    const userPrompt = `[ì›°ë‹ˆìŠ¤ ì½”ì¹­ ìƒë‹´ ìš”ì²­ - ì •í™•í•œ ìˆ˜ì¹˜ ê¸°ë°˜]

ëª©í‘œ: ${goal}
ë§íˆ¬: ${tone}

ì¸ë°”ë”” ì²´ì„±ë¶„ ë¶„ì„ ê²°ê³¼ (ì‚¬ìš©ì í™•ì¸ ì™„ë£Œ):
${metricsText}

ìœ„ ìˆ˜ì¹˜ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì›°ë‹ˆìŠ¤ ì½”ì¹­ ë¶„ì„ì„ ë°˜ë“œì‹œ JSON í˜•ì‹ìœ¼ë¡œë§Œ ì¶œë ¥í•´ì£¼ì„¸ìš”.

ì¤‘ìš”:
1. ìœ„ ìˆ˜ì¹˜ëŠ” ì‚¬ìš©ìê°€ í™•ì¸í•œ ì •í™•í•œ ê°’ì…ë‹ˆë‹¤
2. ìˆ˜ì¹˜ë¥¼ ë³€ê²½í•˜ì§€ ë§ê³  ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ì„¸ìš”
3. JSON í˜•ì‹ìœ¼ë¡œë§Œ ì¶œë ¥í•˜ì„¸ìš”
4. one_line_summary, metrics, interpretation, herbalife_solution, coach_script, guide_4weeks, sms_result ëª¨ë‘ í¬í•¨`

    const apiKey = c.env.OPENAI_API_KEY || process.env.OPENAI_API_KEY
    const baseURL = c.env.OPENAI_BASE_URL || process.env.OPENAI_BASE_URL || 'https://api.openai.com/v1'

    if (!apiKey) {
      return c.json({ error: 'API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.' }, 500)
    }

    const response = await fetch(`${baseURL}/chat/completions`, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': `Bearer ${apiKey}`
      },
      body: JSON.stringify({
        model: 'gpt-4o',
        messages: [
          { role: 'system', content: systemPrompt },
          { role: 'user', content: userPrompt }
        ],
        max_tokens: 8000,
        temperature: 0.8
      })
    })

    if (!response.ok) {
      const errorText = await response.text()
      console.error('OpenAI API Error:', response.status, response.statusText)
      console.error('Error details:', errorText)
      return c.json({ 
        error: `AI ë¶„ì„ ì‹¤íŒ¨: ${response.status} ${response.statusText}`,
        details: errorText
      }, 500)
    }

    const data = await response.json()
    const content = data.choices[0]?.message?.content || ''
    
    console.log('Reanalysis Response length:', content.length)
    console.log('Reanalysis Response preview:', content.substring(0, 200))

    // JSON ì¶”ì¶œ
    let jsonString = ''
    
    const codeBlockMatch = content.match(/```json\s*([\s\S]*?)\s*```/)
    if (codeBlockMatch) {
      jsonString = codeBlockMatch[1].trim()
    } else {
      const jsonMatch = content.match(/\{[\s\S]*\}/)
      if (jsonMatch) {
        jsonString = jsonMatch[0]
      }
    }

    if (!jsonString) {
      return c.json({ 
        error: 'AI ì‘ë‹µì—ì„œ JSONì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.',
        raw_response: content.substring(0, 500)
      }, 500)
    }

    try {
      const result = JSON.parse(jsonString)
      console.log('Reanalysis JSON parsed successfully')
      return c.json(result)
    } catch (parseError) {
      return c.json({ 
        error: 'JSON íŒŒì‹± ì‹¤íŒ¨.',
        raw_response: content.substring(0, 500),
        parse_error: parseError instanceof Error ? parseError.message : 'Unknown error'
      }, 500)
    }

  } catch (error) {
    console.error('Reanalysis Error:', error)
    return c.json({ 
      error: error instanceof Error ? error.message : 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.' 
    }, 500)
  }
})

export default app
